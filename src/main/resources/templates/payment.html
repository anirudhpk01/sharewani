<!DOCTYPE html>
<html>
<head>
    <title>Make Payment</title>
    <script>
        async function submitPayment(event) {
            event.preventDefault();

            const rentalId = localStorage.getItem("rentalId");
const amount = localStorage.getItem("amount");


           
            const method = document.getElementById("method").value;
            

            const payload = {
                rentalId: Number(rentalId),
                method: method,
                amount: parseFloat(amount)
            };

            try {
                const response = await fetch("/sharewani/payments", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    const data = await response.json();
                    alert("‚úÖ Payment Successful! ID: " + data.id);
                } else {
                    const error = await response.text();
                    alert("‚ùå Payment Failed: " + error);
                }
            } catch (err) {
                alert("üö´ Error: " + err.message);
            }
        }
    </script>
</head>
<body>
    <h1>Make a Payment</h1>

    <form onsubmit="submitPayment(event)">
        

        <label>Payment Method:</label>
        <select id="method">
            <option value="CARD">Credit Card</option>
            <option value="BANK_TRANSFER">Bank Transfer</option>
        </select><br><br>

        <label>Amount:</label>
        <input type="number" id="amount" step="0.01" required><br><br>

        <button type="submit">Pay Now</button>
    </form>

    <br><a href="/sharewani/pages/items">Back to Items</a>
</body>
</html>
